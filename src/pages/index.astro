---
import Layout from '../layouts/Layout.astro';
import Hero from '../components/features/home/Hero';
import BlogList from '../components/features/blog/BlogList';
import { getCollection } from 'astro:content';

const posts = (await getCollection('posts')).sort(
	(a, b) => new Date(b.data.date).valueOf() - new Date(a.data.date).valueOf()
);
// Extract unique tags and categories
const allTags = [...new Set(posts.flatMap(post => post.data.tags || []))].sort();
const allCategories = [...new Set(posts.map(post => post.data.category).filter(Boolean))].sort();
---

<Layout title="Emilio Harrison | UX Researcher & Creative Technologist">
    <Hero client:visible />
    <BlogList 
        client:visible 
        posts={posts} 
        allTags={allTags} 
        allCategories={allCategories}
    />
</Layout>
