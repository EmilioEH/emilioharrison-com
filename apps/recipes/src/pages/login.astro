---
import RecipeLayout from '../layouts/RecipeLayout.astro'
import { GoogleSignInButton } from '../components/auth/GoogleSignInButton'

// Server-side redirect if already logged in?
// The middleware usually handles protection, but we can double check.
const auth = Astro.cookies.get('site_auth')
const user = Astro.cookies.get('site_user')
if (auth?.value === 'true' && user?.value) {
  return Astro.redirect('/protected/recipes')
}
---

<RecipeLayout title="Login">
  <div class="flex flex-1 items-center justify-center p-4">
    <div
      class="w-full max-w-md rounded-3xl border border-white/10 bg-white/5 p-8 shadow-2xl backdrop-blur-xl"
    >
      <div class="mb-8 text-center">
        <h1 class="mb-2 font-display text-4xl font-bold tracking-tight text-white">Chef Login</h1>
        <p class="text-white/60">Manage your kitchen with AI</p>
      </div>

      <GoogleSignInButton client:only="react" />
    </div>
  </div>
</RecipeLayout>
